# 接線說明

## ESP32 麵包板配置

ESP32 開發板插在麵包板上，詳細孔位對應參考：[ESP32_麵包板孔位對應.md](components/ESP32_麵包板孔位對應.md)

---

## RGB LED 燈條接線

| RGB LED 燈條 | ESP32 GPIO | 說明 |
|--------------|------------|------|
| R（紅）      | GPIO 16    | PWM Channel 0 |
| G（綠）      | GPIO 17    | PWM Channel 1 |
| B（藍）      | GPIO 5     | PWM Channel 2 |
| 5V+          | 5V         | 電源（正極）|
| （Common Anode）| -      | 共陽極設計 |

**注意**：
- 此為 Common Anode（共陽極）LED，5V+ 接電源，R/G/B 三色透過 GPIO 接地控制
- PWM 值需反轉：`ledcWrite(channel, 255 - value)`
- 0 = 最亮，255 = 最暗

---

## SU-03T 語音模組接線

### ESP32 ↔ SU-03T

| ESP32 | SU-03T | 說明 |
|-------|--------|------|
| GPIO 18 | I11 (RX) | ESP32 TX → SU-03T RX |
| GPIO 19 | I12 (TX) | ESP32 RX → SU-03T TX |
| 5V | I10 (5V) | 電源 |
| GND | I09 (GND) | 接地 |

**UART 設定**：
- 通訊協定：UART2
- 鮑率：9600
- 格式：8N1（8 位元資料，無同位，1 停止位）

### SU-03T ↔ 喇叭

| SU-03T | 喇叭 | 說明 |
|--------|------|------|
| SPK+ | 紅線 | 喇叭正極 |
| SPK- | 黑線 | 喇叭負極 |

---

## 按鈕接線

所有按鈕使用內部上拉電阻（INPUT_PULLUP），按下時接地。

| 按鈕 | 顏色 | ESP32 GPIO | 用途 |
|------|------|------------|------|
| 按鈕 1 | 黑色 | GPIO 2 | 抽獎觸發 |
| 按鈕 2 | 黃色 | GPIO 15 | 保留未用 |
| 按鈕 3 | 紅色 | GPIO 4 | 任務 1（紅燈）|
| 按鈕 4 | 綠色 | GPIO 0 | 任務 2（綠燈）|
| 按鈕 5 | 藍色 | GPIO 13 | 任務 3（藍燈）|

**接線方式**：
- 按鈕一腳 → ESP32 GPIO
- 按鈕另一腳 → GND

**按鈕狀態**：
- 未按下：HIGH（內部上拉）
- 按下：LOW（接地）

---

## CH340 燒錄器接線（燒錄音檔用）

僅在燒錄音檔至 SU-03T 時使用，平常不連接。

| CH340 | SU-03T | 說明 |
|-------|--------|------|
| TXD | B7 (RX) | 交叉連接 |
| RXD | B6 (TX) | 交叉連接 |
| 5V（或 3V3）| I10 | 電源 |
| GND | I09 | 接地 |

**注意**：
- 燒錄時需使用專用燒錄軟體
- 燒錄完成後拔除 CH340，讓 ESP32 控制 SU-03T

---

## 完整系統接線圖（文字版）

```
ESP32 開發板
  ├─ GPIO 16 ────→ RGB LED (R)
  ├─ GPIO 17 ────→ RGB LED (G)
  ├─ GPIO 5  ────→ RGB LED (B)
  ├─ 5V ─────────→ RGB LED (5V+)
  │
  ├─ GPIO 18 ────→ SU-03T I11 (RX)
  ├─ GPIO 19 ────→ SU-03T I12 (TX)
  ├─ 5V ─────────→ SU-03T I10
  ├─ GND ────────→ SU-03T I09
  │
  ├─ GPIO 2 ─────→ 按鈕 1（黑）─→ GND
  ├─ GPIO 15 ────→ 按鈕 2（黃）─→ GND
  ├─ GPIO 4 ─────→ 按鈕 3（紅）─→ GND
  ├─ GPIO 0 ─────→ 按鈕 4（綠）─→ GND
  └─ GPIO 13 ────→ 按鈕 5（藍）─→ GND

SU-03T 語音模組
  ├─ SPK+ ───────→ 喇叭（紅線）
  └─ SPK- ───────→ 喇叭（黑線）
```

---

## 電源配置

| 組件 | 電源來源 | 電壓 |
|------|----------|------|
| ESP32 | USB 供電 | 5V |
| RGB LED | ESP32 5V 輸出 | 5V |
| SU-03T | ESP32 5V 輸出 | 5V |
| 按鈕 | 內部上拉，無需外部電源 | - |
| 喇叭 | SU-03T 驅動 | - |

**注意**：
- 所有組件共用 ESP32 的 GND
- ESP32 透過 USB 供電即可驅動所有組件

---

## 相關文件

- [產品需求文件 (PRD)](PRD.md)
- [開發計畫](development_plan.md)
- [ESP32 麵包板孔位對應](components/ESP32_麵包板孔位對應.md)
- [SU-03T 規格說明](components/SU03T.md)
