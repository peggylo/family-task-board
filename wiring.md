# 接線說明

## ESP32 麵包板配置

ESP32 開發板插在麵包板上，詳細孔位對應參考：[ESP32_麵包板孔位對應.md](components/ESP32_麵包板孔位對應.md)

---

## RGB LED 燈條接線

| RGB LED 燈條 | ESP32 GPIO | 說明 |
|--------------|------------|------|
| R（紅）      | GPIO 16    | PWM Channel 0 |
| G（綠）      | GPIO 17    | PWM Channel 1 |
| B（藍）      | GPIO 5     | PWM Channel 2 |
| 5V+          | 5V         | 電源（正極）|
| （Common Anode）| -      | 共陽極設計 |

**注意**：
- 此為 Common Anode（共陽極）LED，5V+ 接電源，R/G/B 三色透過 GPIO 接地控制
- PWM 值需反轉：`ledcWrite(channel, 255 - value)`
- 0 = 最亮，255 = 最暗

---

## 藍牙喇叭連接

使用藍牙 A2DP 協定無線連接至外部喇叭。

**支援的喇叭**：
- 任何支援 A2DP 的藍牙喇叭
- 測試機型：Bose Mini II SoundLink

**連接方式**：
1. ESP32 開機後自動啟動藍牙 A2DP Source
2. 搜尋並連接指定的藍牙喇叭
3. 建立連接後，音頻透過藍牙串流播放

**注意**：
- 音檔儲存在 ESP32 SPIFFS 檔案系統
- 程式自動進行採樣率轉換（16kHz → 44.1kHz）
- 無需額外接線，純無線連接

---

## 按鈕接線

所有按鈕使用內部上拉電阻（INPUT_PULLUP），按下時接地。

| 按鈕 | 顏色 | ESP32 GPIO | 用途 |
|------|------|------------|------|
| 按鈕 1 | 黑色 | GPIO 2 | 抽獎觸發 |
| 按鈕 2 | 黃色 | GPIO 15 | 保留未用 |
| 按鈕 3 | 紅色 | GPIO 4 | 任務 1（紅燈）|
| 按鈕 4 | 綠色 | GPIO 0 | 任務 2（綠燈）|
| 按鈕 5 | 藍色 | GPIO 13 | 任務 3（藍燈）|

**接線方式**：
- 按鈕一腳 → ESP32 GPIO
- 按鈕另一腳 → GND

**按鈕狀態**：
- 未按下：HIGH（內部上拉）
- 按下：LOW（接地）

---

## 完整系統接線圖（文字版）

```
ESP32 開發板
  ├─ GPIO 16 ────→ RGB LED (R)
  ├─ GPIO 17 ────→ RGB LED (G)
  ├─ GPIO 5  ────→ RGB LED (B)
  ├─ 5V ─────────→ RGB LED (5V+)
  │
  ├─ GPIO 2 ─────→ 按鈕 1（黑）─→ GND
  ├─ GPIO 15 ────→ 按鈕 2（黃）─→ GND
  ├─ GPIO 4 ─────→ 按鈕 3（紅）─→ GND
  ├─ GPIO 0 ─────→ 按鈕 4（綠）─→ GND
  └─ GPIO 13 ────→ 按鈕 5（藍）─→ GND

藍牙連接
  ESP32 (藍牙) )))無線((( 藍牙喇叭
```

---

## 電源配置

| 組件 | 電源來源 | 電壓 |
|------|----------|------|
| ESP32 | USB 供電 | 5V |
| RGB LED | ESP32 5V 輸出 | 5V |
| 按鈕 | 內部上拉，無需外部電源 | - |
| 藍牙喇叭 | 獨立電源（內建電池） | - |

**注意**：
- RGB LED 與按鈕共用 ESP32 的 GND
- ESP32 透過 USB 供電即可
- 藍牙喇叭使用自己的電源，無需接線

---

## 相關文件

- [產品需求文件 (PRD)](PRD.md)
- [開發計畫](development_plan.md)
- [ESP32 麵包板孔位對應](components/ESP32_麵包板孔位對應.md)
